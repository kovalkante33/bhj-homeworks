(() => {
    let dead = 0; // –°—á—ë—Ç—á–∏–∫ –ø–æ–±–µ–¥
    let lost = 0; // –°—á—ë—Ç—á–∏–∫ –ø–æ—Ä–∞–∂–µ–Ω–∏–π
    const maxWins = 10; // –£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã
    const maxLosses = 5; // –£—Å–ª–æ–≤–∏–µ –ø–æ—Ä–∞–∂–µ–Ω–∏—è

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    const updateStats = () => {
        document.getElementById("dead").textContent = dead;
        document.getElementById("lost").textContent = lost;
    };

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª–æ–≤–∏–π –ø–æ–±–µ–¥—ã –∏–ª–∏ –ø–æ—Ä–∞–∂–µ–Ω–∏—è
    const checkWinOrLose = () => {
        if (dead >= maxWins) {
            alert("–í—ã –ø–æ–±–µ–¥–∏–ª–∏! üéâ");
            game.stop(); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–≥—Ä—É
            resetStats(); // –û–±–Ω—É–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        } else if (lost >= maxLosses) {
            alert("–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏! üò¢");
            game.stop(); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–≥—Ä—É
            resetStats(); // –û–±–Ω—É–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        }
    };

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω—É–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    const resetStats = () => {
        dead = 0;
        lost = 0;
        updateStats();
    };

    // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π –ª—É–Ω–∫–∏
    for (let i = 1; i <= 9; i++) {
        game.getHole(i).addEventListener("click", () => {
            if (!game.playing) return; // –ï—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∫–ª–∏–∫–∏

            if (game.getHole(i).classList.contains("hole_has-mole")) {
                dead++; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –ø–æ–±–µ–¥
                game.deactivateHole(i); // –£–±–∏—Ä–∞–µ–º –∫—Ä–æ—Ç–∞ –ø–æ—Å–ª–µ –ø–æ–ø–∞–¥–∞–Ω–∏—è
            } else {
                lost++; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –ø–æ—Ä–∞–∂–µ–Ω–∏–π
            }

            updateStats(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            checkWinOrLose(); // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—ã–∏–≥—Ä–∞–ª –ª–∏ –∏–≥—Ä–æ–∫ –∏–ª–∏ –ø—Ä–æ–∏–≥—Ä–∞–ª
        });
    }
})();